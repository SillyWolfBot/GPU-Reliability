<!DOCTYPE html>
<!-- saved from url=(0042)file:///Users/mrasool/Downloads/Tasks.html -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Priority Board</title>
<style>
    * {
        box-sizing: border-box;
    }

    body {
        background: #050814;
        color: #f5f7ff;
        font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", sans-serif;
        display: flex;
        justify-content: center;
        padding: 20px;
    }

    #container {
        width: 760px;
        background: radial-gradient(circle at top left, rgba(79,140,255,0.2), transparent 60%),
                    radial-gradient(circle at bottom right, rgba(97,216,153,0.16), transparent 60%),
                    #0b1020;
        padding: 18px 18px 14px 18px;
        border-radius: 16px;
        border: 1px solid rgba(255,255,255,0.06);
        box-shadow: 0 18px 40px rgba(0,0,0,0.6);
    }

    .header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        margin-bottom: 10px;
    }

    .title {
        font-size: 18px;
        font-weight: 600;
        letter-spacing: 0.03em;
    }

    .subtitle {
        font-size: 11px;
        color: #a5afc7;
    }

    .filter-buttons {
        margin-top: 6px;
        margin-bottom: 10px;
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
    }

    .filter-buttons button {
        background: rgba(14,19,40,0.95);
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,0.12);
        color: #d6ddff;
        font-size: 11px;
        padding: 4px 10px;
        cursor: pointer;
    }

    .filter-buttons button.active {
        border-color: #4f8cff;
        background: rgba(79,140,255,0.22);
        color: #eaf0ff;
    }

    .filter-buttons button span.dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 4px;
        vertical-align: middle;
    }

    .dot-now { background: #ff7070; }
    .dot-next { background: #ffce5a; }
    .dot-queue { background: #61d899; }
    .dot-support { background: #66b2ff; }
    .dot-backlog { background: #a58bff; }

    .hint {
        font-size: 10px;
        color: #8892aa;
        margin-bottom: 8px;
    }

    .hint span {
        color: #d1dbff;
    }

    .add-task-row {
        display: flex;
        gap: 8px;
        margin-bottom: 10px;
    }

    .add-task-input {
        flex: 1;
        padding: 6px 10px;
        border-radius: 8px;
        border: 1px solid rgba(255,255,255,0.12);
        background: #050814;
        color: #e5e9ff;
        font-size: 12px;
    }

    .add-task-input::placeholder {
        color: #6c7694;
    }

    .add-task-button {
        padding: 6px 12px;
        border-radius: 8px;
        border: 1px solid #4f8cff;
        background: #4f8cff;
        color: #ffffff;
        font-size: 12px;
        cursor: pointer;
        white-space: nowrap;
    }

    .add-task-button:hover {
        background: #6a9cff;
        border-color: #6a9cff;
    }

    #task-list {
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.06);
        background: rgba(5,10,25,0.92);
        max-height: 70vh;
        overflow-y: auto;
        padding-bottom: 4px;
    }

    .bucket-title {
        position: sticky;
        top: 0;
        padding: 8px 14px 6px 14px;
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: #9098b5;
        background: linear-gradient(to bottom, rgba(8,12,24,0.96), rgba(8,12,24,0.88));
        display: flex;
        align-items: center;
        gap: 6px;
        z-index: 1;
    }

    .bucket-line {
        flex: 1;
        height: 1px;
        background: linear-gradient(to right, rgba(144,152,181,0.7), transparent);
    }

    .bucket-chip-dot {
        width: 7px;
        height: 7px;
        border-radius: 50%;
        display: inline-block;
    }

    .task {
        background: #131a32;
        padding: 9px 14px 8px 14px;
        margin: 4px 8px;
        border-radius: 8px;
        cursor: grab;
        border: 1px solid rgba(255,255,255,0.05);
        display: flex;
        gap: 10px;
        align-items: flex-start;
        transition: background 0.12s ease, transform 0.06s ease, box-shadow 0.06s ease;
    }

    .task:hover {
        background: #182139;
        box-shadow: 0 3px 10px rgba(0,0,0,0.5);
        transform: translateY(-1px);
    }

    .task.dragging {
        opacity: 0.4;
        box-shadow: 0 0 0 1px #4f8cff;
    }

    .task.done {
        background: #101427;
        border-style: dashed;
        border-color: rgba(170,178,205,0.8);
    }

    .task.done .task-text {
        text-decoration: line-through;
        color: #686f89;
    }

    .task-dot {
        width: 8px;
        height: 26px;
        border-radius: 999px;
        flex-shrink: 0;
        margin-top: 2px;
    }

    .task-dot.now { background: linear-gradient(to bottom, #ff7070, #ff9a7f); }
    .task-dot.next { background: linear-gradient(to bottom, #ffce5a, #ffd88b); }
    .task-dot.queue { background: linear-gradient(to bottom, #61d899, #8ef1bd); }
    .task-dot.support { background: linear-gradient(to bottom, #66b2ff, #94ccff); }
    .task-dot.backlog { background: linear-gradient(to bottom, #a58bff, #c7a6ff); }

    .task-main {
        flex: 1;
    }

    .task-text {
        font-size: 12px;
        line-height: 1.35;
    }

    .task-meta {
        margin-top: 4px;
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
    }

    .pill {
        font-size: 9px;
        padding: 2px 7px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(5,9,22,0.9);
        color: #cfd7f4;
        cursor: default;
    }

    .pill.bucket-now {
        border-color: rgba(255,112,112,0.8);
        background: rgba(255,112,112,0.08);
    }

    .pill.bucket-next {
        border-color: rgba(255,206,90,0.9);
        background: rgba(255,206,90,0.08);
    }

    .pill.bucket-queue {
        border-color: rgba(97,216,153,0.9);
        background: rgba(97,216,153,0.08);
    }

    .pill.bucket-support {
        border-color: rgba(102,178,255,0.9);
        background: rgba(102,178,255,0.08);
    }

    .pill.bucket-backlog {
        border-color: rgba(165,139,255,0.9);
        background: rgba(165,139,255,0.08);
    }

    .pill.done-pill {
        border-style: dashed;
        color: #aab3d2;
    }

    .pill.backlog-button {
        cursor: pointer;
        border-style: solid;
        border-color: rgba(165,139,255,0.9);
        background: rgba(165,139,255,0.14);
    }

    .pill.backlog-button:hover {
        background: rgba(165,139,255,0.25);
    }

    .footer-note {
        margin-top: 10px;
        font-size: 10px;
        color: #8a93aa;
    }

    .footer-note span {
        color: #d3ddff;
    }
</style>
</head>
<body>

<div id="container">
    <div class="header">
        <div>
            <div class="title">Priority Board</div>
            <div class="subtitle">Drag to reorder. Right click to mark done. Buckets follow position.</div>
        </div>
    </div>

    <div class="filter-buttons">
        <button data-filter="all" class="active" onclick="setFilter('all')">All</button>
        <button data-filter="now" onclick="setFilter('now')">
            <span class="dot dot-now"></span>Now
        </button>
        <button data-filter="next" onclick="setFilter('next')">
            <span class="dot dot-next"></span>Next
        </button>
        <button data-filter="queue" onclick="setFilter('queue')">
            <span class="dot dot-queue"></span>Short queue
        </button>
        <button data-filter="support" onclick="setFilter('support')">
            <span class="dot dot-support"></span>Support
        </button>
        <button data-filter="backlog" onclick="setFilter('backlog')">
            <span class="dot dot-backlog"></span>Backlog
        </button>
    </div>

    <div class="hint">
        <span>Rule:</span> top item is Now, second is Next, a few below are Short queue, then Support for this cycle, then Backlog. Drag to change buckets.
    </div>

    <div class="add-task-row">
        <input id="new-task-input" class="add-task-input" type="text" placeholder="Add a task and press Enter or Add">
        <button class="add-task-button" onclick="addTask()">Add</button>
    </div>

    <!-- your current rendered state; left intact -->
    <div id="task-list"><div class="bucket-title"><span class="bucket-chip-dot dot-now"></span><span>NOW</span><div class="bucket-line"></div></div><div class="task" draggable="true" data-id="29"><div class="task-dot now"></div><div class="task-main"><div class="task-text">Follow up with Rebecca Martin</div><div class="task-meta"><span class="pill bucket-now">Now</span></div></div></div><div class="bucket-title"><span class="bucket-chip-dot dot-next"></span><span>NEXT</span><div class="bucket-line"></div></div><div class="task" draggable="true" data-id="30"><div class="task-dot next"></div><div class="task-main"><div class="task-text">Follow up with Maggie</div><div class="task-meta"><span class="pill bucket-next">Next</span></div></div></div><div class="bucket-title"><span class="bucket-chip-dot dot-queue"></span><span>SHORT QUEUE</span><div class="bucket-line"></div></div><div class="task" draggable="true" data-id="31"><div class="task-dot queue"></div><div class="task-main"><div class="task-text">Follow up with Mathew Kratos and other email we got from Project Olympus</div><div class="task-meta"><span class="pill bucket-queue">Short queue</span></div></div></div><div class="task" draggable="true" data-id="28"><div class="task-dot queue"></div><div class="task-main"><div class="task-text">Write a brief on GPU demo for Texas A&amp;M</div><div class="task-meta"><span class="pill bucket-queue">Short queue</span></div></div></div><div class="task" draggable="true" data-id="27"><div class="task-dot queue"></div><div class="task-main"><div class="task-text">Apply for RSAC</div><div class="task-meta"><span class="pill bucket-queue">Short queue</span></div></div></div><div class="bucket-title"><span class="bucket-chip-dot dot-support"></span><span>SUPPORT</span><div class="bucket-line"></div></div><div class="task" draggable="true" data-id="25"><div class="task-dot support"></div><div class="task-main"><div class="task-text">Rent tents for Plug n Play</div><div class="task-meta"><span class="pill bucket-support">Support</span></div></div></div><div class="task" draggable="true" data-id="2"><div class="task-dot support"></div><div class="task-main"><div class="task-text">Order Tensor Machines stickers for the Plug and Play summit</div><div class="task-meta"><span class="pill bucket-support">Support</span></div></div></div><div class="task" draggable="true" data-id="3"><div class="task-dot support"></div><div class="task-main"><div class="task-text">Send social media feature items to Lauren</div><div class="task-meta"><span class="pill bucket-support">Support</span></div></div></div><div class="task" draggable="true" data-id="4"><div class="task-dot support"></div><div class="task-main"><div class="task-text">Send pilot proposal to Cato Digital</div><div class="task-meta"><span class="pill bucket-support">Support</span></div></div></div><div class="task" draggable="true" data-id="5"><div class="task-dot support"></div><div class="task-main"><div class="task-text">Ask Lauren for one to one mentoring and VC introductions</div><div class="task-meta"><span class="pill bucket-support">Support</span></div></div></div><div class="bucket-title"><span class="bucket-chip-dot dot-backlog"></span><span>BACKLOG</span><div class="bucket-line"></div></div><div class="task" draggable="true" data-id="6"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Follow up with BAE for a technical contact and call</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span></div></div></div><div class="task" draggable="true" data-id="7"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Watch Plug and Play prep or training session and take notes</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span></div></div></div><div class="task" draggable="true" data-id="8"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Follow up with Joshua Haims with thanks and next steps</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span></div></div></div><div class="task" draggable="true" data-id="9"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Recheck Boost thread from Liam introduction and update status</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span></div></div></div><div class="task" draggable="true" data-id="10"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">File action of sole incorporator</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span></div></div></div><div class="task" draggable="true" data-id="11"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Pass board resolution for key actions and roles</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span></div></div></div><div class="task" draggable="true" data-id="12"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Sign board consent to appoint officers</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span></div></div></div><div class="task" draggable="true" data-id="13"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Maintain light follow up with Amy on your priority list</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span></div></div></div><div class="task" draggable="true" data-id="14"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Contact Nvidia Ventures and open a thread</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span></div></div></div><div class="task done" draggable="true" data-id="15"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Build the investor performa</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="16"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Target meetings in Brella for Plug and Play</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="17"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Send engineer questions to Cato Digital</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="18"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Send performa to Joakim at Construct Capital</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="19"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Send performa and answers to Shane at Punch Capital</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="20"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Create AWS account and send AWS account ID to Yashil</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="21"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Send performa to Denver Ventures</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="22"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Coordinate final Plug and Play logistics with Avad Sawda</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="23"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Reach out to Maggie at Shield Cap</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="24"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Open Rho bank account</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="26"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Respond to Maggie</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div><div class="task done" draggable="true" data-id="1"><div class="task-dot backlog"></div><div class="task-main"><div class="task-text">Apply for Schwartz program with current deck and performa</div><div class="task-meta"><span class="pill bucket-backlog">Backlog</span><span class="pill done-pill">Done</span><span class="pill backlog-button">Send to backlog</span></div></div></div></div>

    <div class="footer-note">
        <span>Interpretation:</span> Now and Next are single-focus. Short queue are immediate candidates. Support holds enablers for this week. Backlog is everything that should not steal focus today.
    </div>
</div>

<script>
    // ----------------------
    // TASK DATA (ordered and struck as in your current board)
    // ----------------------
    let tasks = [
        { id: 1,  text: "Apply for Schwartz program with current deck and performa", done: false },
        { id: 2,  text: "Order Tensor Machines stickers for the Plug and Play summit", done: false },
        { id: 3,  text: "Send social media feature items to Lauren", done: false },
        { id: 4,  text: "Send pilot proposal to Cato Digital", done: false },
        { id: 5,  text: "Ask Lauren for one to one mentoring and VC introductions", done: false },
        { id: 6,  text: "Follow up with BAE for a technical contact and call", done: false },
        { id: 7,  text: "Watch Plug and Play prep or training session and take notes", done: false },
        { id: 8,  text: "Follow up with Joshua Haims with thanks and next steps", done: false },
        { id: 9,  text: "Recheck Boost thread from Liam introduction and update status", done: false },
        { id: 10, text: "File action of sole incorporator", done: false },
        { id: 11, text: "Pass board resolution for key actions and roles", done: false },
        { id: 12, text: "Sign board consent to appoint officers", done: false },
        { id: 13, text: "Maintain light follow up with Amy on your priority list", done: false },
        { id: 14, text: "Contact Nvidia Ventures and open a thread", done: false },
        { id: 15, text: "Build the investor performa", done: true },
        { id: 16, text: "Target meetings in Brella for Plug and Play", done: true },
        { id: 17, text: "Send engineer questions to Cato Digital", done: true },
        { id: 18, text: "Send performa to Joakim at Construct Capital", done: true },
        { id: 19, text: "Send performa and answers to Shane at Punch Capital", done: true },
        { id: 20, text: "Create AWS account and send AWS account ID to Yashil", done: true },
        { id: 21, text: "Send performa to Denver Ventures", done: true },
        { id: 22, text: "Coordinate final Plug and Play logistics with Avad Sawda", done: true }
    ];

    const STORAGE_KEY = "priorityBoardState_v1";

    function loadState() {
        try {
            const raw = localStorage.getItem(STORAGE_KEY);
            if (!raw) return;
            const data = JSON.parse(raw);
            if (Array.isArray(data)) {
                const valid = data.every(t =>
                    typeof t.id === "number" &&
                    typeof t.text === "string" &&
                    typeof t.done === "boolean"
                );
                if (valid) {
                    tasks = data;
                }
            }
        } catch (e) {
            // ignore storage errors
        }
    }

    function saveState() {
        try {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks));
        } catch (e) {
            // ignore storage errors
        }
    }

    // load from storage if present
    loadState();

    let nextId = tasks.reduce((max, t) => Math.max(max, t.id), 0) + 1;

    // ----------------------
    // BUCKET MAPPING BY INDEX
    // ----------------------
    function bucketForIndex(i) {
        if (i === 0) return "now";          // single focus
        if (i === 1) return "next";         // single next item
        if (i >= 2 && i <= 4) return "queue";    // short queue: next few
        if (i >= 5 && i <= 9) return "support";  // support work for this cycle
        return "backlog";                        // rest
    }

    function bucketLabel(key) {
        if (key === "now") return "Now";
        if (key === "next") return "Next";
        if (key === "queue") return "Short queue";
        if (key === "support") return "Support";
        if (key === "backlog") return "Backlog";
        return "";
    }

    function bucketDotClass(key) {
        if (key === "now") return "dot-now";
        if (key === "next") return "dot-next";
        if (key === "queue") return "dot-queue";
        if (key === "support") return "dot-support";
        if (key === "backlog") return "dot-backlog";
        return "";
    }

    let filter = "all";
    let draggedId = null;

    // ----------------------
    // RENDER
    // ----------------------
    function render() {
        const list = document.getElementById("task-list");
        list.innerHTML = "";

        let visibleTasks = tasks;
        if (filter !== "all") {
            visibleTasks = tasks.filter((t, index) => bucketForIndex(index) === filter);
        }

        let lastBucket = null;

        visibleTasks.forEach(t => {
            const indexInFull = tasks.indexOf(t);
            const bucket = bucketForIndex(indexInFull);

            if (bucket !== lastBucket) {
                const header = document.createElement("div");
                header.className = "bucket-title";

                const dot = document.createElement("span");
                dot.className = "bucket-chip-dot " + bucketDotClass(bucket);

                const label = document.createElement("span");
                label.textContent = bucketLabel(bucket).toUpperCase();

                const line = document.createElement("div");
                line.className = "bucket-line";

                header.appendChild(dot);
                header.appendChild(label);
                header.appendChild(line);

                list.appendChild(header);
                lastBucket = bucket;
            }

            const div = document.createElement("div");
            div.className = "task";
            div.draggable = (filter === "all");
            div.dataset.id = t.id;

            if (t.done) {
                div.classList.add("done");
            }

            const dotBar = document.createElement("div");
            dotBar.className = "task-dot " + bucket;

            const main = document.createElement("div");
            main.className = "task-main";

            const text = document.createElement("div");
            text.className = "task-text";
            text.textContent = t.text;

            const meta = document.createElement("div");
            meta.className = "task-meta";

            const pillBucket = document.createElement("span");
            pillBucket.className = "pill bucket-" + bucket;
            pillBucket.textContent = bucketLabel(bucket);

            meta.appendChild(pillBucket);

            if (t.done) {
                const donePill = document.createElement("span");
                donePill.className = "pill done-pill";
                donePill.textContent = "Done";
                meta.appendChild(donePill);

                const sendBacklog = document.createElement("span");
                sendBacklog.className = "pill backlog-button";
                sendBacklog.textContent = "Send to backlog";
                sendBacklog.onclick = function(e) {
                    e.stopPropagation();
                    sendToBacklog(t.id);
                };
                meta.appendChild(sendBacklog);
            }

            main.appendChild(text);
            main.appendChild(meta);

            div.appendChild(dotBar);
            div.appendChild(main);

            // right click to toggle done
            div.oncontextmenu = function(e) {
                e.preventDefault();
                toggleDone(t.id);
            };

            // drag events (only active when filter is "all")
            if (filter === "all") {
                div.addEventListener("dragstart", function(e) {
                    draggedId = t.id;
                    div.classList.add("dragging");
                    if (e.dataTransfer) {
                        e.dataTransfer.effectAllowed = "move";
                        e.dataTransfer.setData("text/plain", String(t.id));
                    }
                });

                div.addEventListener("dragend", function() {
                    div.classList.remove("dragging");
                    draggedId = null;
                });

                div.addEventListener("dragover", function(e) {
                    e.preventDefault();
                });

                div.addEventListener("drop", function(e) {
                    e.preventDefault();
                    const fromId = draggedId || parseInt((e.dataTransfer && e.dataTransfer.getData("text/plain")) || "NaN", 10);
                    const toId = t.id;
                    if (!isNaN(fromId) && fromId !== toId) {
                        reorder(fromId, toId);
                    }
                });
            }

            list.appendChild(div);
        });
    }

    // ----------------------
    // LOGIC
    // ----------------------
    function toggleDone(id) {
        const t = tasks.find(x => x.id === id);
        if (!t) return;
        t.done = !t.done;
        render();
        saveState();
    }

    function reorder(fromId, toId) {
        const fromIndex = tasks.findIndex(t => t.id === fromId);
        const toIndex = tasks.findIndex(t => t.id === toId);
        if (fromIndex === -1 || toIndex === -1 || fromIndex === toIndex) return;

        const item = tasks.splice(fromIndex, 1)[0];
        tasks.splice(toIndex, 0, item);
        render();
        saveState();
    }

    function sendToBacklog(id) {
        const index = tasks.findIndex(t => t.id === id);
        if (index === -1) return;
        const item = tasks.splice(index, 1)[0];
        tasks.push(item);
        render();
        saveState();
    }

    // NEW BEHAVIOUR: insert new task at top of Short queue (index 2)
    function addTask() {
        const input = document.getElementById("new-task-input");
        if (!input) return;
        const text = input.value.trim();
        if (!text) return;
        const newTask = { id: nextId++, text: text, done: false };
        const insertIndex = Math.min(2, tasks.length); // 0=Now, 1=Next, 2=top of Short queue
        tasks.splice(insertIndex, 0, newTask);
        input.value = "";
        render();
        saveState();
    }

    function setFilter(newFilter) {
        filter = newFilter;

        const buttons = document.querySelectorAll(".filter-buttons button");
        buttons.forEach(btn => {
            const f = btn.getAttribute("data-filter") || "all";
            if (f === newFilter) {
                btn.classList.add("active");
            } else if (newFilter === "all" && f === "all") {
                btn.classList.add("active");
            } else {
                btn.classList.remove("active");
            }
        });

        render();
    }

    // attach Enter key for add-task input
    const newTaskInput = document.getElementById("new-task-input");
    if (newTaskInput) {
        newTaskInput.addEventListener("keydown", function(e) {
            if (e.key === "Enter") {
                addTask();
            }
        });
    }

    // initial render
    render();
</script>

</body>
</html>
